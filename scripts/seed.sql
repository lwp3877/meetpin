-- 밋핀(MeetPin) 시드 데이터
-- 개발/테스트 환경에서 사용할 샘플 데이터

-- 주의: 이 파일은 개발 환경에서만 사용하세요!
-- 프로덕션 환경에서는 실행하지 마세요!

-- 테스트용 사용자 프로필 (실제 auth.users는 Supabase Auth를 통해 생성됨)
-- 이 데이터는 실제 auth.users가 존재한다고 가정하고 작성됨

-- 샘플 프로필 데이터
INSERT INTO public.profiles (id, nickname, age_range, intro, role) VALUES
  ('00000000-0000-0000-0000-000000000001', '김철수', '20s_late', '안녕하세요! 새로운 사람들과 만나고 싶어요.', 'user'),
  ('00000000-0000-0000-0000-000000000002', '박영희', '30s_early', '운동 좋아하는 직장인입니다.', 'user'),
  ('00000000-0000-0000-0000-000000000003', '이민수', '20s_early', '맛있는 술과 음식을 좋아합니다.', 'user'),
  ('00000000-0000-0000-0000-000000000004', '정수정', '30s_late', '새로운 취미를 찾고 있어요.', 'user'),
  ('00000000-0000-0000-0000-000000000005', '관리자', '30s_early', '밋핀 관리자입니다.', 'admin')
ON CONFLICT (id) DO UPDATE SET
  nickname = EXCLUDED.nickname,
  age_range = EXCLUDED.age_range,
  intro = EXCLUDED.intro,
  role = EXCLUDED.role;

-- 샘플 방 데이터 (서울 주요 지역)
INSERT INTO public.rooms (id, host_uid, title, category, lat, lng, place_text, start_at, max_people, fee, boost_until) VALUES
  (
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '강남에서 치킨과 맥주 한잔 🍻',
    'drink',
    37.4979,
    127.0276,
    '강남역 교보타워 1층 교촌치킨',
    now() + interval '2 hours',
    4,
    15000,
    now() + interval '3 days'
  ),
  (
    '10000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000002',
    '한강에서 러닝 모임 🏃‍♀️',
    'exercise',
    37.5172,
    126.9034,
    '여의도 한강공원 물빛광장',
    now() + interval '1 day',
    8,
    0,
    NULL
  ),
  (
    '10000000-0000-0000-0000-000000000003',
    '00000000-0000-0000-0000-000000000003',
    '홍대에서 보드게임 카페',
    'other',
    37.5563,
    126.9234,
    '홍대입구역 보드게임카페 푸하하',
    now() + interval '3 hours',
    6,
    8000,
    NULL
  ),
  (
    '10000000-0000-0000-0000-000000000004',
    '00000000-0000-0000-0000-000000000004',
    '이태원에서 와인 시음 🍷',
    'drink',
    37.5347,
    126.9947,
    '이태원역 와인바 르뷰',
    now() + interval '5 hours',
    4,
    25000,
    now() + interval '1 day'
  ),
  (
    '10000000-0000-0000-0000-000000000005',
    '00000000-0000-0000-0000-000000000001',
    '건대에서 볼링 치기',
    'exercise',
    37.5403,
    127.0695,
    '건대입구역 CGV 볼링장',
    now() + interval '4 hours',
    6,
    12000,
    NULL
  )
ON CONFLICT (id) DO UPDATE SET
  title = EXCLUDED.title,
  category = EXCLUDED.category,
  lat = EXCLUDED.lat,
  lng = EXCLUDED.lng,
  place_text = EXCLUDED.place_text,
  start_at = EXCLUDED.start_at,
  max_people = EXCLUDED.max_people,
  fee = EXCLUDED.fee,
  boost_until = EXCLUDED.boost_until;

-- 샘플 참가 요청 데이터
INSERT INTO public.requests (id, room_id, requester_uid, message, status) VALUES
  (
    '20000000-0000-0000-0000-000000000001',
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000002',
    '치킨 좋아해요! 같이 맛있게 먹어요~',
    'accepted'
  ),
  (
    '20000000-0000-0000-0000-000000000002',
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000003',
    '근처 직장인이에요. 퇴근하고 갈게요!',
    'pending'
  ),
  (
    '20000000-0000-0000-0000-000000000003',
    '10000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000001',
    '러닝 초보자인데 같이 해도 될까요?',
    'accepted'
  ),
  (
    '20000000-0000-0000-0000-000000000004',
    '10000000-0000-0000-0000-000000000003',
    '00000000-0000-0000-0000-000000000004',
    '보드게임 좋아해요! 참가하고 싶어요.',
    'pending'
  )
ON CONFLICT (id) DO UPDATE SET
  message = EXCLUDED.message,
  status = EXCLUDED.status;

-- 샘플 매칭 데이터 (수락된 요청들)
INSERT INTO public.matches (id, room_id, host_uid, guest_uid) VALUES
  (
    '30000000-0000-0000-0000-000000000001',
    '10000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000002'
  ),
  (
    '30000000-0000-0000-0000-000000000002',
    '10000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000001'
  )
ON CONFLICT (id) DO UPDATE SET
  room_id = EXCLUDED.room_id,
  host_uid = EXCLUDED.host_uid,
  guest_uid = EXCLUDED.guest_uid;

-- 샘플 메시지 데이터
INSERT INTO public.messages (id, match_id, sender_uid, text) VALUES
  (
    '40000000-0000-0000-0000-000000000001',
    '30000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '안녕하세요! 반갑습니다 😊'
  ),
  (
    '40000000-0000-0000-0000-000000000002',
    '30000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000002',
    '네 안녕하세요! 오늘 치킨 맛있게 먹어요!'
  ),
  (
    '40000000-0000-0000-0000-000000000003',
    '30000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '네! 7시에 강남역 9번 출구에서 만날까요?'
  ),
  (
    '40000000-0000-0000-0000-000000000004',
    '30000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000002',
    '러닝 페이스는 어느 정도로 하실 예정인가요?'
  ),
  (
    '40000000-0000-0000-0000-000000000005',
    '30000000-0000-0000-0000-000000000002',
    '00000000-0000-0000-0000-000000000001',
    '천천히 조깅 정도로 생각하고 있어요! 부담 갖지 마세요 😄'
  )
ON CONFLICT (id) DO UPDATE SET
  text = EXCLUDED.text;

-- 통계/테스트용 추가 방들 (지역별)
INSERT INTO public.rooms (host_uid, title, category, lat, lng, place_text, start_at, max_people, fee) VALUES
  -- 신촌/홍대 지역
  ('00000000-0000-0000-0000-000000000002', '신촌에서 맛집 탐방', 'other', 37.5594, 126.9427, '신촌역 맛집거리', now() + interval '6 hours', 4, 20000),
  ('00000000-0000-0000-0000-000000000003', '홍대 클럽 가실 분', 'other', 37.5564, 126.9236, '홍대클럽거리', now() + interval '8 hours', 6, 30000),
  
  -- 강남 지역  
  ('00000000-0000-0000-0000-000000000004', '강남 노래방 가요!', 'other', 37.4977, 127.0270, '강남역 노래방', now() + interval '3 hours', 5, 15000),
  ('00000000-0000-0000-0000-000000000001', '선정릉에서 테니스', 'exercise', 37.5043, 127.0484, '선정릉공원 테니스장', now() + interval '1 day', 4, 8000),
  
  -- 여의도 지역
  ('00000000-0000-0000-0000-000000000002', '여의도 맥주축제', 'drink', 37.5281, 126.8968, '여의도공원', now() + interval '2 days', 8, 25000),
  
  -- 잠실 지역
  ('00000000-0000-0000-0000-000000000003', '잠실 야구 관람', 'other', 37.5146, 127.0719, '잠실야구장', now() + interval '3 days', 6, 18000),
  
  -- 이촌 지역
  ('00000000-0000-0000-0000-000000000004', '이촌에서 피크닉', 'other', 37.5209, 126.9598, '이촌한강공원', now() + interval '2 days', 10, 0)
ON CONFLICT DO NOTHING;

-- 개발용 알림
SELECT 'Seed data inserted successfully! 🎉' as message;