-- 파일경로: scripts/enhanced-seed.sql
-- Enhanced seed data for MeetPin development environment
-- This script creates comprehensive test data for all major features

-- =============================================================================
-- PROFILES (Test Users)
-- =============================================================================

-- 관리자 계정
INSERT INTO profiles (
  id, 
  email, 
  nickname, 
  bio, 
  role,
  phone,
  location_text,
  created_at,
  updated_at
) VALUES 
(
  '00000000-0000-0000-0000-000000000001', 
  'admin@meetpin.com', 
  '관리자', 
  'MeetPin 관리자입니다', 
  'admin',
  '01012345678',
  '서울특별시 강남구',
  NOW() - INTERVAL '30 days',
  NOW()
),

-- 일반 사용자들
(
  '00000000-0000-0000-0000-000000000002', 
  'user1@example.com', 
  '치킨러버', 
  '치킨과 맥주를 사랑하는 사람입니다! 홍대, 강남 자주 다녀요 🍗🍺', 
  'user',
  '01087654321',
  '서울특별시 마포구 홍대',
  NOW() - INTERVAL '20 days',
  NOW() - INTERVAL '1 day'
),
(
  '00000000-0000-0000-0000-000000000003', 
  'user2@example.com', 
  '운동매니아', 
  '헬스, 축구, 농구 뭐든지 좋아해요! 같이 운동하실 분 연락주세요 💪', 
  'user',
  '01011223344',
  '서울특별시 강남구 역삼동',
  NOW() - INTERVAL '15 days',
  NOW() - INTERVAL '2 hours'
),
(
  '00000000-0000-0000-0000-000000000004', 
  'user3@example.com', 
  '카페탐방러', 
  '새로운 카페 찾아다니는 걸 좋아해요. 디저트도 좋아합니다 ☕🍰', 
  'user',
  '01055667788',
  '서울특별시 용산구 이태원',
  NOW() - INTERVAL '10 days',
  NOW() - INTERVAL '30 minutes'
),
(
  '00000000-0000-0000-0000-000000000005', 
  'user4@example.com', 
  '게임덕후', 
  'PC방, 보드게임 카페 자주 가요. 롤, 오버워치 합니다 🎮', 
  'user',
  '01099887766',
  '서울특별시 서초구 강남역',
  NOW() - INTERVAL '8 days',
  NOW() - INTERVAL '15 minutes'
),
(
  '00000000-0000-0000-0000-000000000006', 
  'user5@example.com', 
  '독서왕', 
  '책읽기 모임, 스터디 카페에서 만나요. 인문학 책 좋아해요 📚', 
  'user',
  '01044556677',
  '서울특별시 종로구 인사동',
  NOW() - INTERVAL '5 days',
  NOW() - INTERVAL '1 hour'
);

-- =============================================================================
-- ROOMS (Meeting Rooms with Various Categories and Status)
-- =============================================================================

INSERT INTO rooms (
  id,
  host_uid,
  title,
  category,
  place_text,
  lat,
  lng,
  start_at,
  max_people,
  current_people,
  fee,
  visibility,
  status,
  description,
  boost_until,
  created_at,
  updated_at
) VALUES 

-- 홍대 맥주 모임 (진행 중)
(
  '11111111-1111-1111-1111-111111111001',
  '00000000-0000-0000-0000-000000000002',
  '홍대에서 치킨맥주 파티! 🍗🍺',
  'drink',
  '홍대 걷고싶은거리 치킨집',
  37.5563,
  126.9241,
  NOW() + INTERVAL '2 hours',
  6,
  3,
  25000,
  'public',
  'active',
  '홍대 맛집에서 치킨과 맥주로 스트레스 날려버려요! 회사 일 때문에 힘드신 분들 모여라~',
  NOW() + INTERVAL '1 day',
  NOW() - INTERVAL '3 hours',
  NOW() - INTERVAL '10 minutes'
),

-- 강남 운동 모임 (곧 시작)
(
  '11111111-1111-1111-1111-111111111002',
  '00000000-0000-0000-0000-000000000003',
  '강남 헬스장에서 같이 운동해요 💪',
  'exercise',
  '강남역 피트니스센터',
  37.4979,
  127.0276,
  NOW() + INTERVAL '1 day 3 hours',
  4,
  2,
  15000,
  'public',
  'active',
  '운동 초보자도 환영! 같이 건강한 몸 만들어가요. PT샘이 기본 가이드 해주십니다.',
  NULL,
  NOW() - INTERVAL '1 day',
  NOW() - INTERVAL '5 minutes'
),

-- 이태원 카페 모임 (부스트됨)
(
  '11111111-1111-1111-1111-111111111003',
  '00000000-0000-0000-0000-000000000004',
  '이태원 힐링 카페 투어 ☕',
  'other',
  '이태원 로스터리 카페거리',
  37.5347,
  126.9944,
  NOW() + INTERVAL '3 days 2 hours',
  8,
  1,
  20000,
  'public',
  'active',
  '이태원의 숨겨진 예쁜 카페들을 탐방해보아요. 사진 찍기도 좋고 디저트도 맛있어요!',
  NOW() + INTERVAL '2 days',
  NOW() - INTERVAL '2 days',
  NOW()
),

-- 종로 독서 모임
(
  '11111111-1111-1111-1111-111111111004',
  '00000000-0000-0000-0000-000000000006',
  '인사동에서 독서모임 📚',
  'other',
  '인사동 북카페',
  37.5718,
  126.9856,
  NOW() + INTERVAL '1 week',
  5,
  1,
  10000,
  'public',
  'active',
  '이번 주 책: "코스모스" 함께 읽고 토론해요. 과학책 좋아하시는 분들 환영!',
  NULL,
  NOW() - INTERVAL '1 hour',
  NOW() - INTERVAL '1 hour'
),

-- 서초 게임 모임
(
  '11111111-1111-1111-1111-111111111005',
  '00000000-0000-0000-0000-000000000005',
  '강남 PC방에서 롤 듀오해요 🎮',
  'other',
  '강남역 게임존 PC방',
  37.4979,
  127.0292,
  NOW() + INTERVAL '3 days',
  4,
  2,
  8000,
  'public',
  'active',
  '골드 이상 랭크 원해요! 같이 랭크 올려봐요. 보이스 채팅 가능하신 분!',
  NULL,
  NOW() - INTERVAL '30 minutes',
  NOW() - INTERVAL '30 minutes'
),

-- 완료된 모임들
(
  '11111111-1111-1111-1111-111111111006',
  '00000000-0000-0000-0000-000000000002',
  '지난 주 홍대 맥주모임',
  'drink',
  '홍대 호프집',
  37.5563,
  126.9241,
  NOW() - INTERVAL '3 days',
  6,
  6,
  30000,
  'public',
  'completed',
  '성공적으로 완료된 모임입니다!',
  NULL,
  NOW() - INTERVAL '1 week',
  NOW() - INTERVAL '3 days'
),

-- 취소된 모임
(
  '11111111-1111-1111-1111-111111111007',
  '00000000-0000-0000-0000-000000000003',
  '날씨 때문에 취소된 운동모임',
  'exercise',
  '한강 공원',
  37.5172,
  127.0473,
  NOW() - INTERVAL '2 days',
  8,
  0,
  0,
  'public',
  'cancelled',
  '비 때문에 취소되었습니다.',
  NULL,
  NOW() - INTERVAL '5 days',
  NOW() - INTERVAL '2 days'
);

-- =============================================================================
-- REQUESTS (Join Requests with Various States)
-- =============================================================================

INSERT INTO requests (
  id,
  room_id,
  requester_uid,
  message,
  status,
  created_at,
  updated_at
) VALUES 

-- 홍대 치킨맥주 모임 요청들
(
  '22222222-2222-2222-2222-222222222001',
  '11111111-1111-1111-1111-111111111001',
  '00000000-0000-0000-0000-000000000003',
  '운동하고 나서 치킨맥주 최고죠! 참여하고 싶어요 😊',
  'accepted',
  NOW() - INTERVAL '2 hours',
  NOW() - INTERVAL '1 hour 30 minutes'
),
(
  '22222222-2222-2222-2222-222222222002',
  '11111111-1111-1111-1111-111111111001',
  '00000000-0000-0000-0000-000000000004',
  '홍대 자주 가는데 함께 해보고 싶어요!',
  'accepted',
  NOW() - INTERVAL '1 hour 45 minutes',
  NOW() - INTERVAL '1 hour'
),
(
  '22222222-2222-2222-2222-222222222003',
  '11111111-1111-1111-1111-111111111001',
  '00000000-0000-0000-0000-000000000005',
  '치킨 엄청 좋아해요! 꼭 참여하고 싶습니다',
  'pending',
  NOW() - INTERVAL '30 minutes',
  NOW() - INTERVAL '30 minutes'
),

-- 강남 헬스 모임 요청
(
  '22222222-2222-2222-2222-222222222004',
  '11111111-1111-1111-1111-111111111002',
  '00000000-0000-0000-0000-000000000002',
  '운동 초보인데 괜찮을까요? 열심히 하겠습니다!',
  'accepted',
  NOW() - INTERVAL '5 hours',
  NOW() - INTERVAL '4 hours'
),

-- 이태원 카페 모임 요청 (거절된 요청)
(
  '22222222-2222-2222-2222-222222222005',
  '11111111-1111-1111-1111-111111111003',
  '00000000-0000-0000-0000-000000000005',
  '카페 좋아해요~ 참여하고 싶어요',
  'rejected',
  NOW() - INTERVAL '1 day 2 hours',
  NOW() - INTERVAL '1 day'
),

-- 게임 모임 요청
(
  '22222222-2222-2222-2222-222222222006',
  '11111111-1111-1111-1111-111111111005',
  '00000000-0000-0000-0000-000000000003',
  '플래티넘 랭크입니다! 같이 올려봐요',
  'accepted',
  NOW() - INTERVAL '2 hours',
  NOW() - INTERVAL '1 hour'
);

-- =============================================================================
-- MATCHES (Accepted Requests -> Chat Enabled)
-- =============================================================================

INSERT INTO matches (
  id,
  room_id,
  host_uid,
  guest_uid,
  created_at
) VALUES 

-- 홍대 치킨맥주 모임 매치들
(
  '33333333-3333-3333-3333-333333333001',
  '11111111-1111-1111-1111-111111111001',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000003',
  NOW() - INTERVAL '1 hour 30 minutes'
),
(
  '33333333-3333-3333-3333-333333333002',
  '11111111-1111-1111-1111-111111111001',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000004',
  NOW() - INTERVAL '1 hour'
),

-- 강남 헬스 모임 매치
(
  '33333333-3333-3333-3333-333333333003',
  '11111111-1111-1111-1111-111111111002',
  '00000000-0000-0000-0000-000000000003',
  '00000000-0000-0000-0000-000000000002',
  NOW() - INTERVAL '4 hours'
),

-- 게임 모임 매치
(
  '33333333-3333-3333-3333-333333333004',
  '11111111-1111-1111-1111-111111111005',
  '00000000-0000-0000-0000-000000000005',
  '00000000-0000-0000-0000-000000000003',
  NOW() - INTERVAL '1 hour'
);

-- =============================================================================
-- MESSAGES (Chat Messages between Matched Users)
-- =============================================================================

INSERT INTO messages (
  id,
  match_id,
  sender_uid,
  text,
  created_at
) VALUES 

-- 홍대 치킨맥주 모임 채팅 (치킨러버 ↔ 운동매니아)
(
  '44444444-4444-4444-4444-444444444001',
  '33333333-3333-3333-3333-333333333001',
  '00000000-0000-0000-0000-000000000002',
  '안녕하세요! 치킨맥주 모임 신청해주셔서 감사해요 😊',
  NOW() - INTERVAL '1 hour 25 minutes'
),
(
  '44444444-4444-4444-4444-444444444002',
  '33333333-3333-3333-3333-333333333001',
  '00000000-0000-0000-0000-000000000003',
  '안녕하세요! 운동하고 치킨맥주 완전 조합이죠 ㅋㅋ',
  NOW() - INTERVAL '1 hour 20 minutes'
),
(
  '44444444-4444-4444-4444-444444444003',
  '33333333-3333-3333-3333-333333333001',
  '00000000-0000-0000-0000-000000000002',
  '맞아요! 몇 시쯤 도착하실 예정이세요?',
  NOW() - INTERVAL '1 hour 15 minutes'
),
(
  '44444444-4444-4444-4444-444444444004',
  '33333333-3333-3333-3333-333333333001',
  '00000000-0000-0000-0000-000000000003',
  '헬스 끝나고 바로 갈게요! 7시 반쯤 도착할 것 같아요',
  NOW() - INTERVAL '1 hour 10 minutes'
),

-- 홍대 치킨맥주 모임 채팅 (치킨러버 ↔ 카페탐방러)  
(
  '44444444-4444-4444-4444-444444444005',
  '33333333-3333-3333-3333-333333333002',
  '00000000-0000-0000-0000-000000000004',
  '안녕하세요! 홍대 치킨집 추천해주신 거 정말 좋네요',
  NOW() - INTERVAL '55 minutes'
),
(
  '44444444-4444-4444-4444-444444444006',
  '33333333-3333-3333-3333-333333333002',
  '00000000-0000-0000-0000-000000000002',
  '그 집 진짜 맛있죠! 양념치킨이 특히 유명해요 🍗',
  NOW() - INTERVAL '50 minutes'
),

-- 강남 헬스 모임 채팅 (운동매니아 ↔ 치킨러버)
(
  '44444444-4444-4444-4444-444444444007',
  '33333333-3333-3333-3333-333333333003',
  '00000000-0000-0000-0000-000000000003',
  '운동 초보라고 하셨는데 전혀 문제없어요! 차근차근 알려드릴게요',
  NOW() - INTERVAL '3 hours 50 minutes'
),
(
  '44444444-4444-4444-4444-444444444008',
  '33333333-3333-3333-3333-333333333003',
  '00000000-0000-0000-0000-000000000002',
  '정말 감사합니다! 운동 좀 배우고 싶었거든요 💪',
  NOW() - INTERVAL '3 hours 45 minutes'
),

-- 게임 모임 채팅 (게임덕후 ↔ 운동매니아)
(
  '44444444-4444-4444-4444-444444444009',
  '33333333-3333-3333-3333-333333333004',
  '00000000-0000-0000-0000-000000000005',
  '플래티넘이시라니! 저보다 랭크가 높으시네요 ㄷㄷ',
  NOW() - INTERVAL '55 minutes'
),
(
  '44444444-4444-4444-4444-444444444010',
  '33333333-3333-3333-3333-333333333004',
  '00000000-0000-0000-0000-000000000003',
  '아니에요 ㅋㅋ 같이하면 더 재밌을 것 같아요! 언제 PC방 가실까요?',
  NOW() - INTERVAL '50 minutes'
);

-- =============================================================================
-- BLOCKED_USERS (User Blocking Relationships)
-- =============================================================================

INSERT INTO blocked_users (
  id,
  blocker_uid,
  blocked_uid,
  reason,
  created_at
) VALUES 

-- 카페탐방러가 게임덕후를 차단 (부적절한 채팅)
(
  '55555555-5555-5555-5555-555555555001',
  '00000000-0000-0000-0000-000000000004',
  '00000000-0000-0000-0000-000000000005',
  'inappropriate_messages',
  NOW() - INTERVAL '2 days'
);

-- =============================================================================
-- REPORTS (User Reports for Safety)
-- =============================================================================

INSERT INTO reports (
  id,
  reporter_uid,
  reported_uid,
  type,
  reason,
  details,
  status,
  created_at,
  updated_at
) VALUES 

-- 부적절한 행동 신고
(
  '66666666-6666-6666-6666-666666666001',
  '00000000-0000-0000-0000-000000000004',
  '00000000-0000-0000-0000-000000000005',
  'inappropriate_behavior',
  '모임에서 다른 참여자들에게 불쾌한 언행을 했습니다',
  '계속해서 사적인 연락처를 요구하고, 거절했음에도 불구하고 지속적으로 괴롭혔습니다. 다른 참여자들도 불편해했습니다.',
  'pending',
  NOW() - INTERVAL '1 day',
  NOW() - INTERVAL '1 day'
),

-- 노쇼 신고
(
  '66666666-6666-6666-6666-666666666002',
  '00000000-0000-0000-0000-000000000003',
  '00000000-0000-0000-0000-000000000006',
  'no_show',
  '모임 당일에 연락없이 불참했습니다',
  '3번이나 모임을 신청해놓고 당일에 연락도 없이 나타나지 않았습니다. 다른 사람들이 기다렸는데 매우 실례였습니다.',
  'reviewed',
  NOW() - INTERVAL '3 days',
  NOW() - INTERVAL '2 days'
);

-- =============================================================================
-- SUMMARY MESSAGE
-- =============================================================================

DO $$
BEGIN
  RAISE NOTICE '';
  RAISE NOTICE '=================================================================';
  RAISE NOTICE 'MeetPin Enhanced Seed Data 생성 완료!';
  RAISE NOTICE '=================================================================';
  RAISE NOTICE '';
  RAISE NOTICE '✅ 생성된 데이터:';
  RAISE NOTICE '   • 사용자 프로필: 6개 (관리자 1, 일반사용자 5)';
  RAISE NOTICE '   • 모임방: 7개 (활성 5, 완료 1, 취소 1)';
  RAISE NOTICE '   • 참여 요청: 6개 (승인 4, 대기 1, 거절 1)';
  RAISE NOTICE '   • 매치/채팅: 4개 매치, 10개 메시지';
  RAISE NOTICE '   • 차단 관계: 1개';
  RAISE NOTICE '   • 신고: 2개 (대기 1, 검토완료 1)';
  RAISE NOTICE '';
  RAISE NOTICE '🧪 테스트 시나리오:';
  RAISE NOTICE '   1. 다양한 카테고리 모임 (drink, exercise, other)';
  RAISE NOTICE '   2. 실시간 채팅 시스템';
  RAISE NOTICE '   3. 모임 요청/승인/거절 플로우';
  RAISE NOTICE '   4. 사용자 차단 및 신고 기능';
  RAISE NOTICE '   5. 부스트 모임 기능';
  RAISE NOTICE '   6. 관리자 권한 테스트';
  RAISE NOTICE '';
  RAISE NOTICE '👤 테스트 로그인 계정:';
  RAISE NOTICE '   • 관리자: admin@meetpin.com';
  RAISE NOTICE '   • 치킨러버: user1@example.com (홍대 활동)';
  RAISE NOTICE '   • 운동매니아: user2@example.com (강남 활동)';
  RAISE NOTICE '   • 카페탐방러: user3@example.com (이태원 활동)';
  RAISE NOTICE '   • 게임덕후: user4@example.com (PC방 활동)';
  RAISE NOTICE '   • 독서왕: user5@example.com (인사동 활동)';
  RAISE NOTICE '';
  RAISE NOTICE '=================================================================';
END $$;